<!DOCTYPE html>
<html>
  <head>
  <title>Junk Drawer : A grab-bag of Git links</title>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <!-- link to main stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://benknoble.github.io/assets/css/styles.css" media="screen">

  <script src="/assets/js/scale.fix.js"></script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" >
  </script>

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link type="application/atom+xml" rel="alternate" href="https://benknoble.github.io/feed.xml" title="Junk Drawer" />
</head>

  <body>
    <header>
  <h1>
  <a href="https://benknoble.github.io/">
  <img src='/assets/img/logo.png' alt='Junk Drawer Logo' width=32 height=32> Junk Drawer</a></h1>
  <p>For all those little papers scattered across your desk</p>
</header>

    <section>
      <nav>
  <ul>
    
    <li class="">
      <a href="https://benknoble.github.io/about/">About</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/categories/">Posts</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/workshops/">Workshops</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/papers/">Papers</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/writings/">Writings</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/reading/">Reading List</a>
    </li>
    
  </ul>
</nav>

      <h1>A grab-bag of Git links</h1>
      <p class="meta"><span class="authors">
  
  
    D. Ben Knoble
  
</span>
 on 01 Feb 2025 in Blog</p>
<div id="post">
  <p>Some reflections on a mass of articles taking up space on my phone.</p>

<h2 id="how-i-use-git-worktrees"><a href="https://matklad.github.io/2024/07/25/git-worktrees.html">How I use Git worktrees</a></h2>

<p>Matklad explains what to me is a novel application of worktrees. Git’s own
<a href="https://git-scm.com/docs/git-worktree#_examples">manual page</a> talks about them
like a better stash, but Matklad uses them to organize parallel tasks that want
their own sources and builds:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">project/</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">main</code>: the current <code class="language-plaintext highlighter-rouge">main</code> branch of development</li>
      <li><code class="language-plaintext highlighter-rouge">work</code>: active work</li>
      <li><code class="language-plaintext highlighter-rouge">review</code>: PR review</li>
      <li><code class="language-plaintext highlighter-rouge">fuzz</code>: fuzzing with Zig</li>
      <li><code class="language-plaintext highlighter-rouge">scratch</code>: random fixups</li>
    </ul>
  </li>
</ul>

<p>While I probably wouldn’t personally use a <code class="language-plaintext highlighter-rouge">main</code> worktree just for diffing,
since <code class="language-plaintext highlighter-rouge">git diff</code> can do that already, using it to compare build times and
behavior is smart. My current projects don’t need fuzzing, and I tend to make
“scratch” work by throwing it into my
<a href="https://github.com/benknoble/Dotfiles/blob/6a07c3fb97067eed575bc26042ef9dc945301efb/links/vim/autoload/bk/notepad.vim">notepad</a>
<a href="https://github.com/benknoble/Dotfiles/blob/6a07c3fb97067eed575bc26042ef9dc945301efb/links/vim/after/plugin/config/wiki.vim#L43-L45">wiki</a>
and coming back to it later. Still, I could imagine setting up 3 or 4 tmux
windows per project in different worktrees, or just one and using
<code class="language-plaintext highlighter-rouge">pushd</code>/<code class="language-plaintext highlighter-rouge">popd</code>. Build systems that use last-modified times, like <code class="language-plaintext highlighter-rouge">make</code>, would
probably re-build less stuff in the main worktree than in my chaotic work or
review worktrees, so that could help.</p>

<h2 id="commit-messages-are-optional"><a href="https://schpet.com/note/git-commit-messages-are-optional">commit messages are optional</a></h2>

<p>If you know me, you know I don’t agree with the title on principle, but:
technically you can use empty commit messages with <code class="language-plaintext highlighter-rouge">--allow-empty-messages</code>. And
the author smartly uses this for a workflow that includes lots of transient
commits (not dissimilar to one I use myself), where the final commits get a nice
message.</p>

<p>My personal version of this is usually <code class="language-plaintext highlighter-rouge">git commit -m.</code> or <code class="language-plaintext highlighter-rouge">git commit -m wip</code>,
which don’t jar quite as much in <code class="language-plaintext highlighter-rouge">git log</code> and similar output.</p>

<h2 id="reorient-github-pull-requests-around-changesets"><a href="https://mitchellh.com/writing/github-changesets">Reorient GitHub Pull Requests Around Changesets</a></h2>

<p>I’m not the only one to think <a href="/blog/2024/10/04/copy-range-diff/">GitHub PR reviews have problems</a>: for one, the lack of real threading
<a href="https://drewdevault.com/2018/07/02/Email-driven-git.html">like in email</a> makes
pages with lots of comments abysmally slow, and the diff + comment interface is
no better for even reasonably sized PRs! Meanwhile, the underlying Git
technology is <em>fast</em>.</p>

<p>Mitchell Hashimoto focuses more on the lifecycle problems with GitHub’s
interface, though: primarily the distinct lack of versioning (again, something
email and <code class="language-plaintext highlighter-rouge">git range-diff</code> support natively) and the problem of working on the
reviews and the responses in parallel. Like many of us, he wishes GitHub could
orient itself around versioned changesets.</p>

<p>Fortunately, this is what <a href="https://sr.ht">SourceHut</a> does, and I keep coming up
with new reasons to try it.</p>

<h2 id="tips-for-creating-merge-commits"><a href="https://www.brandonpugh.com/blog/tips-for-creating-merge-commits/">Tips for creating merge commits</a></h2>

<p>Brandon Pugh’s first line of advice is one I’ve oft repeated: <em>make the commit
message as useful as possible</em>. As he points out, we talk a lot about regular
commits but less about merge commits. I’ve <a href="/blog/2024/08/02/github-squash/">ranted about messages in PR
merges</a>, but not explained that</p>

<ul>
  <li>I like to use <a href="https://github.com/benknoble/requirements.txt.vim/commit/c4383604c34787e0151c3f9b0325b1aa5565ff2d">the “Conflict” comments Git
adds</a>
to explain their source and resolution.</li>
  <li>I use <a href="https://github.com/benknoble/Dotfiles/blob/6a07c3fb97067eed575bc26042ef9dc945301efb/links/gitconfig#L114"><code class="language-plaintext highlighter-rouge">merge.log =
true</code></a>
to include the 20 most recent commits in the merge commit summary. Similarly
you could use <code class="language-plaintext highlighter-rouge">merge.branchdesc</code> to populate messages with branch descriptions
if your workflow often includes setting those.</li>
</ul>

<p>Pugh also points out there’s often other explanations that can be given in the
description, and we should probably do that.</p>

<p>And of course, avoid evil merges.</p>

<h2 id="store-code-discussions-in-git-using-git-notes"><a href="https://wouterj.nl/2024/08/git-notes">Store code discussions in Git using Git notes</a></h2>

<p>Wouter’s primer on notes is one of the better ones I’ve seen because it
explicitly covers note namespaces and refspecs, making them easier to work with.
In fact, I’m now tempted to start putting notes on commits at work and pushing
them, just in case someone ever discovers them ;)</p>

<p>Unfortunately, I can’t find any options to make adding the “fetch all notes”
refspec the default when setting up new remotes (or cloning). Although it is
possible to create default refspecs for pushing, that also overrides
<code class="language-plaintext highlighter-rouge">push.default</code> which is useful for <a href="/blog/2024/11/15/til-range-diff/#primer">making Git DWIM in a triangular workflow</a>.</p>

<h2 id="how-different-are-different-diff-algorithms-in-git"><a href="https://cs.paperswithcode.com/paper/how-different-are-different-diff-algorithms">How Different Are Different diff Algorithms in Git?</a></h2>

<p>I haven’t had time to read this yet, but it seems like it could be a good
reference on the diff algorithms themselves. They are one aspect of Git I’ve
never really explored.</p>

<h2 id="not-rocket-science-rule-applies-to-merge-commits"><a href="https://matklad.github.io/2023/12/31/git-things.html#Not-Rocket-Science-Rule-Applies-To-Merge-Commits">Not rocket science rule applies to merge commits</a></h2>

<p>Another Matklad piece: <em>typical projects don’t need a linear history of every
commit passing tests</em>. In such a project, merges are the record of passing tests
(so <code class="language-plaintext highlighter-rouge">bisect</code> with <code class="language-plaintext highlighter-rouge">--first-parent</code> first). Take advantage of this by structuring
commits in branches to split work. Matklad gives several examples.</p>

<p>Matklad also mentions the “merge to main, rebase feature branches”
workflow—here, you still rebase feature branches if you need to build on top
of later commits, but you create merge commit when bring the branch into main.</p>

<p>Oh, and by the way: <strong>stop commenting out dead or broken code</strong><sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>. Delete it. We
can recover it with version control (and it’s likely to never be fixed or
recovered anyway).</p>

<h2 id="commit-messages"><a href="https://matklad.github.io/2023/12/31/git-things.html#Commit-Messages">Commit messages</a></h2>

<p>More Matklad: small and trivial changes deserve small, trivial commit messages.
And we should try to make more of them.</p>

<p>Bait taken! You know I like a good long commit message, but it’s absolutely true
that big commits are a workflow problem often imposed by CI + review turnaround.
I’ve worked with plenty of folks who wish they could do differently but who know
that they need to squeeze as much as they can out of each PR because turnaround
time is long.</p>

<p>Yikes.</p>

<p>I like most of Matklad’s recommendations for fixing the workflow problem here,
though of course in some regulated industries merging pre-review is a
non-starter.</p>

<p>I will single out one comment:</p>

<blockquote>
  <p>If a change is really minor, I would say <code class="language-plaintext highlighter-rouge">minor</code> is an okay commit message!</p>
</blockquote>

<p>No, it isn’t: the subject should describe the fix, even if it’s just <code class="language-plaintext highlighter-rouge">fix doc
typo</code> or <code class="language-plaintext highlighter-rouge">s/it's/its</code>. Those still convey the “minor” intent while providing
enough detail to folks fetching new changes to know what’s happening around
them.</p>

<h2 id="unified-versus-split-diff"><a href="https://matklad.github.io/2023/10/23/unified-vs-split-diff.html">Unified versus split diff</a></h2>

<p>Guess I’m reading a lot of Matklad lately.</p>

<p>The “better diff for review” idea is novel to me, and certainly seems like a
good one to try building! But I’m rather more interested in fetching PR changes
for review and then resetting them so that
<a href="https://github.com/tpope/vim-fugitive">vim-fugitive</a> can show them to me. I
normally review one commit at a time, so this might be a good inter-commit
workflow. It also helps provide an overview. Interesting.</p>

<p>In the end, whether by email or web UI, we’re still leaving comments on the
diffs, though.</p>

<h2 id="two-kinds-of-code-review"><a href="https://matklad.github.io/2021/01/03/two-kinds-of-code-review.html">Two kinds of code review</a></h2>

<p>This one reminded me of times where I’ve accepted PRs from newer contributors by
fixing up their branches and merging locally—hopefully that provided some
lessons for them, but it might not be as teachable as merging followed by fixes
(cc’ing them). At least, in prior applications where I didn’t show them the
range-diff and walk them through the changes I made, I certainly didn’t
<em>actively</em> teach them.</p>

<h2 id="putting-the-i-back-in-ide-towards-a-github-explorer"><a href="https://blog.janestreet.com/putting-the-i-back-in-ide-towards-a-github-explorer/">Putting the I back in IDE: towards a GitHub explorer</a></h2>

<p>JaneStreet describes an internal review and workflow tool, and I’m jealous.</p>

<p>It did inspire me to add a personal todo item: try building a Vim plugin for
reading and writing PR review comments! I’ve explored a little of the prior
work, but it’s deep in my personal backlog.</p>

<h2 id="code-review-antipatterns"><a href="https://www.chiark.greenend.org.uk/~sgtatham/quasiblog/code-review-antipatterns/">Code review antipatterns</a></h2>

<p>An excellent bit of sarcasm. Well worth the read, especially for new engineers
(what not to do) and experienced engineers (who laugh because of their
experience).</p>

<h2 id="git-random"><a href="https://git-random.olets.dev">git-random</a></h2>

<p>A tool I’ve been meaning to build (roughly), and it already exists! I actually
want to be able to draw a graph shape and have the tool create it, but this is
close and might serve as a back-end.</p>

<h2 id="why-github-actually-won"><a href="https://blog.gitbutler.com/why-github-actually-won/">Why GitHub actually won</a></h2>

<p>Much to <a href="/blog/2024/08/02/github-squash/">my chagrin</a>, it is a
dominant force. GitLab is probably the closest competitor and, if I recall
correctly, remains closed-source.</p>

<p>I’m strongly <a href="https://sfconservancy.org/GiveUpGitHub/">considering
alternatives</a>, and I think you should
too. <a href="https://sr.ht">SourceHut</a> is the most compelling for me right now, but
it’s nice to see that we still live with a <a href="/blog/2024/04/30/extracting-ourselves-from-github-equals-git/">thriving Git forge ecosystem</a> that
really puts its weight behind “decentralized.”</p>

<h2 id="my-unorthodox-branchless-git-workflow"><a href="https://drewdevault.com/2020/04/06/My-weird-branchless-git-workflow.html">My unorthodox, branchless git workflow</a></h2>

<p>While I’m jealous of the “rebase all work at once” aspect of this flow, I’m not
sure I could handle organizing that much parallel work just in rebase todo lists
(partly because I work for a company that, at it’s best, still has some review
and merge cycles that take longer than a few days).</p>

<p>It also wouldn’t surprise me if keeping everything together made it easy to
accidentally send patches out that depend on previous patches without
remembering this fact or mentioning it, which could become very confusing.</p>

<h2 id="notes">Notes</h2>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>To add a bit of nuance to this, I don’t care what you do in your tree.
Comment out code, play around, whatever. But in the canonical upstream tree,
the main branch? Don’t send me PRs with bodies of commented out code. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>
<hr/>
<h4>Tags:</h4>
<ul class="tags">
  
    <li>
      <a href="https://benknoble.github.io/tags#git" class="tag">
        git
      </a>
    </li>
  
</ul>

<div id="post-categories">
  <h4>Categories:
  
    <a href="/categories/#blog">Blog</a>
    
  
  </h4>
</div>

<div id="disqus_thread"></div>
<div class="load-comments" onclick="load_comments(this)">Load Comments</div>
<script>
  var disqus_shortname = 'https-benknoble-github-io';
  var disqus_config = function () {
    this.page.url = "https://benknoble.github.io/blog/2025/02/01/git-roundup/";
    this.page.identifier = "/blog/2025/02/01/git-roundup";
  };

  function load_comments(div) {
    var d = document, s = d.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    div.parentNode.removeChild(div)
  };
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<div id="post-navigation">
  
  <span id="previous">
    <a href="https://benknoble.github.io/blog/2025/01/29/racket-rhombus-r7rs/"
      title="Collected chats about Racket">
      Previous</a>
  </span>
  
  
  <span id="next">
    <a href="https://benknoble.github.io/blog/2025/02/05/neovim/"
       title="Why I still prefer Vim">
      Next</a>
  </span>
  
</div>
<div id="back-to-posts">
  <a href="/categories/#a-grab-bag-of-git-links">
    Back to posts</a>
</div>

    </section>
    <footer>
<hr/>
  <ul>
    
    <li>
      <a href="https://benknoble.github.io/">Home</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/contact/">Contact</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/sitemap.xml">Sitemap</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/feed.xml">RSS Feed</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/colophon/">Colophon</a>
    </li>
    
    <li>
      <a href="https://github.com/benknoble/benknoble.github.io/blob/master/LICENSE">Copyright D. Ben Knoble</a>
    </li>
    
    <li>
      <p xmlns:cc="http://creativecommons.org/ns#" ><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a></p>
    </li>
  </ul>
</footer>

    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    <script>
      (function() {
        var script = document.createElement('script');
        window.counter = 'https://benknoble_github_io.goatcounter.com/count'
        script.async = 1;
        script.src = '//gc.zgo.at/count.js';

        var ins = document.getElementsByTagName('script')[0];
        ins.parentNode.insertBefore(script, ins)
      })();
    </script>
  </body>
</html>
