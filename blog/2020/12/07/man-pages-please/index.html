<!DOCTYPE html>
<html>
  <head>
  <title>Junk Drawer : Please *do* generate man-pages</title>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <!-- link to main stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://benknoble.github.io/assets/css/styles.css" media="screen">

  <script src="/assets/js/scale.fix.js"></script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" >
  </script>

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link type="application/atom+xml" rel="alternate" href="https://benknoble.github.io/feed.xml" title="Junk Drawer" />
</head>

  <body>
    <header>
  <h1>
  <a href="https://benknoble.github.io/">
  <img src='/assets/img/logo.png' alt='Junk Drawer Logo' width=32 height=32> Junk Drawer</a></h1>
  <p>For all those little papers scattered across your desk</p>
</header>

    <section>
      <nav>
  <ul>
    
    <li class="">
      <a href="https://benknoble.github.io/about/">About</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/categories/">Posts</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/workshops/">Workshops</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/papers/">Papers</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/writings/">Writings</a>
    </li>
    
    <li class="">
      <a href="https://benknoble.github.io/reading/">Reading List</a>
    </li>
    
  </ul>
</nav>

      <h1>Please *do* generate man-pages</h1>
      <p class="meta"><span class="authors">
  
  
    D. Ben Knoble
  
</span>
 on 07 Dec 2020 in Blog</p>
<div id="post">
  <p>The recent trend of not including man-pages with command-line “apps” (“tools” or
“programs” are better words!) irks me.</p>

<h2 id="where-is-this-coming-from">Where is this coming from?</h2>

<p>Many places. Specifically:</p>

<ul>
  <li>personal observation of the trend that many command-line programs don’t
support <code class="language-plaintext highlighter-rouge">man &lt;program&gt;</code></li>
  <li>the <a href="https://clig.dev/">otherwise-full-of-solid-advice <em>Command Line
Guidelines</em></a>, which says</li>
</ul>

<blockquote>
  <p><strong>Don’t bother with man pages</strong>. We believe that if you’re following these
guidelines for help and documentation, you won’t need man pages. Not enough
people use man pages, and they don’t work on Windows. If your CLI framework
and package manager make it easy to output man pages, go for it, but otherwise
your time is best spent improving web docs and built-in help text.</p>

  <p><em>Citation: <a href="https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46">12 Factor CLI Apps</a>.</em></p>
</blockquote>

<p>(Emphasis in original)</p>

<ul>
  <li>and the “original” <a href="https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46">12 Factor CLI
Apps</a> from Heroku:</li>
</ul>

<blockquote>
  <p>Unless you already know your users will want man pages, I wouldn’t bother also
outputting them as they just aren’t used often enough anymore. Novice
developers are unaware of them and they don’t work on Windows. Offline support
isn’t necessary if you already have in-CLI help. Still, man page support is
coming to oclif because in a framework I think it makes sense. It can be
solved once for all oclif CLIs to reap the benefits.</p>
</blockquote>

<h2 id="whats-wrong-with-no-man-pages">What’s wrong with no man-pages?</h2>

<p>Let’s start with “what’s <em>right</em> about no man-pages?”. My answer: absolutely
nothing. It’s laziness (and maybe a lack of good tooling). But if asciidoc and
other markup languages can convert to man-pages, it’s time your program did too.</p>

<p>Now, what’s actually wrong with not having them? Well, to answer that question,
I need to talk about how I use them.</p>

<p>I use man-pages for <em>reference</em>. Many of the best-written man-pages become
well-known, to the point where I can quickly navigate to the appropriate
section. Man-pages are nearly uniformly laid out for a reason.</p>

<p>I use man-pages for <em>convenience</em>. They are perfect when I just want to
double-check a flag without breaking my flow (<code class="language-plaintext highlighter-rouge">--help</code> isn’t awful, but half the
time it takes me too many invocations to get the right help!). Opening a
web-browser is the epitome of breaking that flow: I actually left my work
context (the terminal, where the program is going to run), and I have to flip
between browser and terminal. Not hard on a wide screen, but on my laptop it’s
not ideal. With a man-page, I know I can fire up a tmux pane or vim-split (thank
you, <code class="language-plaintext highlighter-rouge">:Man</code>) to browse without disturbing my current context. Man-pages are
nearly uniformly laid out for a reason.</p>

<p>Just to emphasize this, <code class="language-plaintext highlighter-rouge">:Man</code> ships with vim. In any vim, I can run that
command (possibly prefaced by <code class="language-plaintext highlighter-rouge">:runtime ftplugin/man.vim</code>) and get a man-page.
Conversely, it is harder to get the output of <code class="language-plaintext highlighter-rouge">--help</code> and friends where I want
it. Some options:</p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="c">" 1. put it directly in the buffer</span>
<span class="p">:</span><span class="k">read</span> <span class="p">!</span>program <span class="p">--</span><span class="k">help</span>
<span class="c">" clutters the buffer… so,</span>
<span class="c">" 2. new buffer</span>
<span class="p">:</span><span class="k">new</span> <span class="p">|</span> <span class="k">read</span> <span class="p">!</span>program <span class="p">--</span><span class="k">help</span>
<span class="c">" too much typing…</span>
<span class="c">" 3. a plugin, such as Clam</span>
<span class="p">:</span>Clam program <span class="p">--</span><span class="k">help</span>
<span class="c">" not portable, and still extra typing (though only by 6 characters)</span></code></pre></figure>

<blockquote>
  <p>Aside: this is a pain-point for me when I start working with certain
languages. With C, <code class="language-plaintext highlighter-rouge">K</code> and <code class="language-plaintext highlighter-rouge">keywordprg=:Man</code> is usually good enough (and tags
make up the difference). With Rust &amp; Python, it’s been a hack-filled journey
to get decent in-editor documentation support (and for Rust I almost always
have to open a web-browser, even if it’s with a hot-key). For my workhorse
SML, the only docs are web-browsed or local HTML pages. For lots of other
languages, there’s just not much. Is it too much to ask programming-language
designers to support local, text-based documentation in a program-consumable
format? It doesn’t have to be a man-page, but <em>something</em>.</p>
</blockquote>

<p>I use man-pages for <em>search-ability</em> and general text-manipulation. I have
configured <code class="language-plaintext highlighter-rouge">MANPAGER</code> to use vim, so I have a powerful set of tools to deal
with programs and their documentation. I even have maps for <code class="language-plaintext highlighter-rouge">-</code> and <code class="language-plaintext highlighter-rouge">_</code> to start
searching for short (<code class="language-plaintext highlighter-rouge">-x</code>) and long (<code class="language-plaintext highlighter-rouge">--x…</code>) flags, which makes for a quick
browse (when formatted appropriately). I can’t do that with <code class="language-plaintext highlighter-rouge">--help</code> as easily
(<code class="language-plaintext highlighter-rouge">grep</code>ping doesn’t usually cut it), and even <code class="language-plaintext highlighter-rouge">less</code> as a pager has pretty poor
search ability. Say it with me: Man-pages are nearly uniformly laid out for a
reason.</p>

<p>Personally, I use man-pages to <em>learn</em>. When I’m not sure how something works, I
can usually figure out from a good <code class="language-plaintext highlighter-rouge">man thing</code>. This isn’t really a selling
point, but it is a part of many workflows. “Man” stands for “manual,” after all:
or do people not read those anymore?</p>

<p>All this to say that what’s wrong with no man-pages is a lack of these things,
particularly convenience and non-workflow-breaking-documentation.</p>

<h2 id="no-man-page-is-better-than-a-bad-one">No man-page is better than a bad one</h2>

<p>I’m looking at you <a href="https://cli.github.com"><code class="language-plaintext highlighter-rouge">gh</code></a>. Your documentation, frankly,
is atrocious. Only a sentence at worst that doesn’t actually tell me what you
do! And the flag documentation is frankly so ambiguous that I’ve written
commands with mutually exclusive flags set because it wasn’t at all clear that
only one was allowed. (<code class="language-plaintext highlighter-rouge">gh repo fork --clone false --remote true</code> seems
reasonable, no?).</p>

<p>So, don’t provide a man-page if it’s poor. But maybe find a way to write some
good documentation that could be converted to a man-page (or vice-versa)?</p>

<h2 id="if-not-a-man-page">If not a man-page…</h2>

<p>Well, something like vim’s <code class="language-plaintext highlighter-rouge">:help</code> is <em>fantastic</em>. It’s not for every program,
but any seriously interactive (especially full-screen) program should consider
something of the sort. It helps that the system is extendable and plain text,
too.</p>

<h2 id="a-few-considered-counter-arguments">A few considered counter-arguments</h2>

<ul>
  <li>
    <p>“Doesn’t work on Windows”: valid point. But what does? (Joking aside, surely
there’s <em>something</em> that works as a documentation format for the Windows
terminal besides HTML?)</p>
  </li>
  <li>
    <p>“Novices aren’t aware”: so educate them. Part of CLIG’s shtick was to educate
users when they make a mistake with your command. It’s as easy as keeping
<code class="language-plaintext highlighter-rouge">--help</code> brief with a pointer to “see <code class="language-plaintext highlighter-rouge">man program</code> for more details”.</p>

    <p>Following up on that, I don’t consider <code class="language-plaintext highlighter-rouge">--help</code> to the end-all-be-all of
  documentation, as you’ve probably noticed. I only type <code class="language-plaintext highlighter-rouge">--help</code> when I’m
  sure it will be quick and useful: generally, a usage summary and a “Top 5”
  common options/invocations. Sometimes it’s to re-assure myself that the
  command does what I think it does, like when I use one of the more obscure
  git commands. When I want the whole book, I go to the man-page. Too-long
  <code class="language-plaintext highlighter-rouge">--help</code> is “saying too much” in the words of CLIG.</p>
  </li>
  <li>
    <p>“Offline support isn’t necessary if you already have in-CLI help”: false. (Or
at least, I disagree.) Solution proposed: generate man-pages from in-CLI help or
vice-versa. I favor the latter, actually, but I’m probably in the minority on
that. I find that it’s nicer to write documentation in a textual format rather
than in strings in code, especially in some languages. (Newlines? Continuations?
Leading spaces? Ugh. Format it for me—I don’t want to have to care.)</p>
  </li>
  <li>
    <p>“otherwise your time is best spent improving web docs and built-in help text”:
see above solution. They could all be one and the same (or at least tied
together: sure, a tutorial might not be a good candidate for a man-page, at
least for smaller programs. But it could link to an HTML version of the page
that lives in my terminal.).</p>
  </li>
</ul>

</div>
<hr/>
<h4>Tags:</h4>
<ul class="tags">
  
    <li>
      <a href="https://benknoble.github.io/tags#rants" class="tag">
        rants
      </a>
    </li>
  
    <li>
      <a href="https://benknoble.github.io/tags#design" class="tag">
        design
      </a>
    </li>
  
    <li>
      <a href="https://benknoble.github.io/tags#docs" class="tag">
        docs
      </a>
    </li>
  
    <li>
      <a href="https://benknoble.github.io/tags#productivity" class="tag">
        productivity
      </a>
    </li>
  
    <li>
      <a href="https://benknoble.github.io/tags#open-source" class="tag">
        open-source
      </a>
    </li>
  
    <li>
      <a href="https://benknoble.github.io/tags#shell" class="tag">
        shell
      </a>
    </li>
  
</ul>

<div id="post-categories">
  <h4>Categories:
  
    <a href="/categories/#blog">Blog</a>
    
  
  </h4>
</div>

<div id="disqus_thread"></div>
<div class="load-comments" onclick="load_comments(this)">Load Comments</div>
<script>
  var disqus_shortname = 'https-benknoble-github-io';
  var disqus_config = function () {
    this.page.url = "https://benknoble.github.io/blog/2020/12/07/man-pages-please/";
    this.page.identifier = "/blog/2020/12/07/man-pages-please";
  };

  function load_comments(div) {
    var d = document, s = d.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    div.parentNode.removeChild(div)
  };
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<div id="post-navigation">
  
  <span id="previous">
    <a href="https://benknoble.github.io/blog/2020/09/29/excel-duplicate-files/"
      title="Excel for Mac cannot simultaneously edit files with the same basename">
      Previous</a>
  </span>
  
  
  <span id="next">
    <a href="https://benknoble.github.io/blog/2021/01/11/state-of-dis-union/"
       title="The State of Dis-union">
      Next</a>
  </span>
  
</div>
<div id="back-to-posts">
  <a href="/categories/#please-do-generate-man-pages">
    Back to posts</a>
</div>

    </section>
    <footer>
<hr/>
  <ul>
    
    <li>
      <a href="https://benknoble.github.io/">Home</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/contact/">Contact</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/sitemap.xml">Sitemap</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/feed.xml">RSS Feed</a>
    </li>
    
    <li>
      <a href="https://benknoble.github.io/colophon/">Colophon</a>
    </li>
    
    <li>
      <a href="https://github.com/benknoble/benknoble.github.io/blob/master/LICENSE">Copyright D. Ben Knoble <script type='text/javascript'>document.write(new Date().getFullYear())</script></a>
    </li>
    
    <li>
      <p xmlns:cc="http://creativecommons.org/ns#" ><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a></p>
    </li>
  </ul>
</footer>

    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    <script>
      (function() {
        var script = document.createElement('script');
        window.counter = 'https://benknoble_github_io.goatcounter.com/count'
        script.async = 1;
        script.src = '//gc.zgo.at/count.js';

        var ins = document.getElementsByTagName('script')[0];
        ins.parentNode.insertBefore(script, ins)
      })();
    </script>
  </body>
</html>
